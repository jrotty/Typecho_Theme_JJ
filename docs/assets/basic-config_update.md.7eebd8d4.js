import{_ as s,o as a,c as n,O as l}from"./chunks/framework.915160cd.js";const p="/Typecho_Theme_JJ/images/basic-config/update/update01.png",g=JSON.parse('{"title":"资源更新","description":"","frontmatter":{},"headers":[],"relativePath":"basic-config/update.md","filePath":"basic-config/update.md"}'),o={name:"basic-config/update.md"},e=l(`<h1 id="资源更新" tabindex="-1">资源更新 <a class="header-anchor" href="#资源更新" aria-label="Permalink to &quot;资源更新&quot;">​</a></h1><h2 id="站点静态资源更新" tabindex="-1">站点静态资源更新 <a class="header-anchor" href="#站点静态资源更新" aria-label="Permalink to &quot;站点静态资源更新&quot;">​</a></h2><p>当主题的资源文件发生变化后（css、js），我们刷新网站其实并不会发生变化，其主要问题就是因为宝塔的 nginx 默认配置 css 和 js 文件使用的是强缓存。</p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> .*\\.(js|css)?$</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> expires </span><span style="color:#F07178;">     </span><span style="color:#F78C6C;">12h</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> error_log </span><span style="color:#F07178;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> access_log </span><span style="color:#F07178;">/dev/null</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    }</span></span></code></pre></div><p>官方默认配置 12 个小时内资源都是使用缓存的形式，这就导致我们一些新的变化没法及时展示了，为此我们需要将其调整为协商缓存的形式：</p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> .*\\.(js|css)?$</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> add_header </span><span style="color:#F07178;">Last-Modified </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">date_gmt</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> if_modified_since </span><span style="color:#F07178;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> etag </span><span style="color:#F07178;">on</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> error_log </span><span style="color:#F07178;">/dev/null</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;"> access_log </span><span style="color:#F07178;">/dev/null</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    }</span></span></code></pre></div><p>使用方式，在宝塔中找到你的站点，然后点击设置，找到配置文件，将内容改为上述代码内容即可：</p><p><img src="`+p+'" alt="" data-fancybox="gallery"></p>',8),c=[e];function t(r,i,F,y,D,d){return a(),n("div",null,c)}const h=s(o,[["render",t]]);export{g as __pageData,h as default};
